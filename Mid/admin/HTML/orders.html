<!DOCTYPE html>
<html>
<head>
    <title>Orders</title>
    <link rel="stylesheet" href="../CSS/sidebar.css">
    <link rel="stylesheet" href="../CSS/orders.css">
    <script src="../JS/auth.js"></script>
</head>
<body>
    <nav class="sidebar">
        <h2>Best Cart</h2>
        <a href="dashboard.html">Dashboard</a>
        <a href="products.html">Products</a>
        <a href="orders.html" class="active">Orders</a>
        <a href="customers.html">Customers</a>
        <a href="marketing.html">Marketing</a>
        <a href="#" onclick="logout()" class="logout">Logout</a>
    </nav>
    <div class="main">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h1>Manage Orders</h1>
            <button class="btn btn-primary" onclick="openCreateModal()">+ Create New Order</button>
        </div>

        <table id="order-table"><thead><tr><th>ID</th><th>Customer</th><th>Status</th><th>Total</th><th>Actions</th></tr></thead><tbody></tbody></table>
        
        <div id="modal" class="modal">
            <div class="modal-content">
                <h3>Edit Order</h3>
                <input type="text" id="m-cust" placeholder="Customer Name">
                <select id="m-status"><option>Pending</option><option>Shipped</option><option>Delivered</option></select>
                <h4>Items</h4>
                <ul id="m-items"></ul>
                <select id="add-prod-select"></select>
                <button class="btn btn-primary" onclick="addItem()">Add Product</button>
                <br><br>
                <div style="text-align:right">
                    <button class="btn btn-primary" onclick="saveEdit()">Save Changes</button>
                    <button class="btn btn-danger" onclick="closeModal()">Close</button>
                </div>
            </div>
        </div>

        <div id="create-modal" class="modal">
            <div class="modal-content">
                <h3>Place Order (Admin)</h3>
                <label>Customer Name:</label>
                <input type="text" id="new-cust-name" placeholder="Enter Customer Name">
                
                <div style="background:#f9f9f9; padding:10px; border-radius:5px; margin:10px 0;">
                    <label>Add Product:</label>
                    <div style="display:flex; gap:5px;">
                        <select id="new-prod-select" style="flex:1;"></select>
                        <input type="number" id="new-prod-qty" value="1" style="width:60px;" min="1">
                        <button class="btn btn-primary" onclick="addToNewCart()">Add</button>
                    </div>
                </div>

                <h4>Order Items:</h4>
                <ul id="new-order-list" style="max-height:100px; overflow-y:auto; border:1px solid #ddd; padding:10px;">
                    <li style="color:gray">No items yet</li>
                </ul>
                <p><strong>Total: <span id="new-order-total">0</span> Tk</strong></p>

                <div style="text-align:right; margin-top:20px;">
                    <button class="btn btn-primary" onclick="placeAdminOrder()">Place Order</button>
                    <button class="btn btn-danger" onclick="closeCreateModal()">Cancel</button>
                </div>
            </div>
        </div>

    </div>
    <script src="../../Backend/db.js"></script>
    <script src="../JS/orders.js"></script>
</body>
</html>